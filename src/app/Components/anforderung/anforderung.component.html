<div class="anforderung">
  <div class="anforderung__details">
    <div class="anforderung__details-top">
      <div class="anforderung__titel">
        {{ anforderung.data.title }}
      </div>
      <div class="anforderung__menu-button" (click)="onBtnMenuClicked()">
        <img src="assets/threeHoriDots.png" class="anforderung__menu-button-icon">
      </div>

      <div class="anforderung__dropdown" *ngIf="isMenuVisible" [ngStyle]="{'top.px': dropdownPosition.y}">
        <button (click)="onBtnEditClicked()">Bearbeiten</button>
        <button (click)="onBtnDeleteClicked()">LÃ¶schen</button>
        <div class="anforderung__menu-background" (click)="onMenuBackgroundClicked()"></div>
      </div>
    </div>
    <div class="anforderung__beschreibung">
      {{ anforderung.data.beschreibung }}
    </div>
  </div>

  <div class="anforderung__tasks-zustaende-wrapper" cdkDropListGroup>

    <!-- To-Do Spalte -->
    <div class="anforderung__tasks-todo anforderung__tasks-spalte"
         cdkDropList
         [cdkDropListData]="todoTasks"
         (cdkDropListDropped)="dropTask($event, TaskZustand.todo)">
      <app-task *ngFor="let t of todoTasks"
                cdkDrag
                [cdkDragDisabled]="dragAndDropDisabled"
                [task]="t"
                (isInEditMode)="isDragAndDropDisabled($event)">
      </app-task>
      <div class="anforderung__add-button" (click)="onBtnAddTaskClicked()">+</div>
    </div>

    <!-- In Progress Spalte -->
    <div class="anforderung__tasks-in-progress anforderung__tasks-spalte"
         cdkDropList
         [cdkDropListData]="inProgressTasks"
         (cdkDropListDropped)="dropTask($event, TaskZustand.inProgress)">
      <app-task *ngFor="let t of inProgressTasks"
                cdkDrag
                [cdkDragDisabled]="dragAndDropDisabled"
                [task]="t"
                (isInEditMode)="isDragAndDropDisabled($event)">
      </app-task>
    </div>

    <!-- Done Spalte -->
    <div class="anforderung__tasks-done anforderung__tasks-spalte"
         cdkDropList
         [cdkDropListData]="doneTasks"
         (cdkDropListDropped)="dropTask($event, TaskZustand.done)">
      <app-task *ngFor="let t of doneTasks"
                cdkDrag
                [cdkDragDisabled]="dragAndDropDisabled"
                [task]="t"
                (isInEditMode)="isDragAndDropDisabled($event)">
      </app-task>
    </div>

  </div>
</div>
